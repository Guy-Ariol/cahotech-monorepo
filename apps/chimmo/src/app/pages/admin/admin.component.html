<div class="admin noselect">
  <div [class.mobile]="utilsProv.isMobile" [class.desktop]="utilsProv.isDesktop">

    <app-header [menuList]="dataprov.mainMenuAdmin" (menuSeleted)="topMenuSelected($event)" (toogleMenu)="toogleMenu()">
    </app-header>

    <div class="content" *ngIf="!dataprov.showTopMenu">
      <h1 *ngIf="currentView==view.none" style="text-align: center;">{{currentTitle}}</h1>

      <div class="new-standard" *ngIf="[view.landlord, view.renter, view.house, view.home].includes(currentView)">
        <h1>{{currentTitle}}</h1>

        <div *ngIf="!isNew && !isEdit" style="width: 70%;">
          <admin-generic-listing (showForm)="isNew = true" (editUser)="editUser($event)" [currentView]="currentView">
          </admin-generic-listing>
        </div>

        <div *ngIf="isNew || isEdit">
          <admin-forms [controlArray]="controlArray" [isEdit]="isEdit" [currentUserIndex]="currentUserIndex"
            [data]="data" [currentView]="currentView" (done)="isEdit= false; isNew = false">
          </admin-forms>
        </div>
      </div>

      <div class="cashbox" *ngIf="currentView==view.MoneyIn">
        <h1>{{currentTitle}}</h1>

        <div *ngIf="!isNew && !isEdit">
          <button nzType="primary" nz-button (click)="isNew=true">
            <i nz-icon nzType="plus"></i> Ajouter
          </button>
          <br><br>
        </div>

        <div *ngIf="isNew || isEdit">
          <div class="landlord-selection">
            Bailleur
            <nz-input-group nzSize="small" [nzSuffix]="suffixIcon">
              <input placeholder="Chercher bailleur" [(ngModel)]="newCashBox.sender" nz-input
                (ngModelChange)="onLandlordSelected($event)" [nzAutocomplete]="auto" />
            </nz-input-group>

            <ng-template #suffixIcon>
              <i nz-icon nzType="search"></i>
            </ng-template>

            <nz-autocomplete #auto>
              <div *ngFor="let user of getLandlords()">
                <nz-auto-optgroup *ngIf="user.firstName && user.email && user?.apps.includes('chimmo')"
                  [nzLabel]="groupTitle">
                  <ng-template #groupTitle>
                    <span>{{ user.lastName }} {{ user.firstName }} </span>
                  </ng-template>

                  <nz-auto-option [nzLabel]="user.lastName + ' ' + user.firstName" [nzValue]="user.id">
                    {{ user.email }}
                  </nz-auto-option>

                </nz-auto-optgroup>
              </div>

            </nz-autocomplete>
          </div><br>

          <div *ngIf="isSelection1" class="home-selection">
            Logement
            <nz-input-group nzSize="small" [nzSuffix]="suffixIcon">
              <input placeholder="input here" nz-input [(ngModel)]="inputValue" (ngModelChange)="onChange($event)"
                [nzAutocomplete]="auto2" />
            </nz-input-group>

            <ng-template #suffixIcon>
              <i nz-icon nzType="search"></i>
            </ng-template>

            <nz-autocomplete #auto2 style="height: 25px;">
              <nz-auto-optgroup *ngFor="let group of optionGroups" [nzLabel]="groupTitle2">
                <ng-template #groupTitle2>
                  <span>{{ group.home.name}} </span>
                </ng-template>

                <nz-auto-option [nzLabel]="group.home.name" [nzValue]="group.home.id">
                  {{ group.home.name }}
                </nz-auto-option>

              </nz-auto-optgroup>
            </nz-autocomplete>
            <br><br>

            Montant
            <input type="number" nz-input nzSize="large" [(ngModel)]="newCashBox.sum">
            <br><br>

            Source
            <nz-select nzSize="large" style="width: 100%;" [(ngModel)]="newCashBox.source">
              <nz-option *ngFor="let source of getPaymentSourceList()" [nzLabel]="source" [nzValue]="source"></nz-option>
            </nz-select>
          </div>



          <div style="text-align: center; padding-top: 35px;">
            <button nz-button (click)="isNew=false; isEdit=false">Annuler</button> &nbsp;&nbsp;
            <button nz-button nzType="primary" (click)="addCash()">Valider</button>
          </div>
        </div>
      </div>

      <div *ngIf="currentView==view.home"></div>

      <div *ngIf="currentView==view.MoneyIn"></div>

      <div *ngIf="currentView==view.MoneyIn2"></div>

      <div *ngIf="currentView==view.bill"></div>

      <div *ngIf="currentView==view.discount"></div>

      <div *ngIf="currentView==view.repair"></div>
    </div>

  </div>

</div>
